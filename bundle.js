(()=>{var t={788:(t,n,e)=>{"use strict";e.d(n,{Z:()=>r});var s=e(15),a=e.n(s),o=e(645),i=e.n(o)()(a());i.push([t.id,"body {\n  font-family: 'Roboto', sans-serif;\n}\n\nh1 {\n  text-align: center;\n}\n\n.khDjRQ3EZ-hj-Fv_Pijby {\n  padding: 0;\n  margin: 0 auto;\n  min-width: 300px;\n  max-width: 600px;\n}\n\nul._25p7DIV67-QNcCjUH2_dOv {\n  list-style-type: none;\n  padding: 0;\n}\n\nul._25p7DIV67-QNcCjUH2_dOv > li {\n  height: 50px;\n  border: 2px solid #d6d2d2;\n  border-radius: 5px;\n  padding: 7px;\n  margin-top: 5px;\n}\n\nul._25p7DIV67-QNcCjUH2_dOv > li > p {\n  margin: 0;\n}\n\nul._25p7DIV67-QNcCjUH2_dOv > li > p._1K28VpaI9vpLB0C1hETo7e {\n  font-size: 18px;\n}\n\nul._25p7DIV67-QNcCjUH2_dOv > li > p._1K28VpaI9vpLB0C1hETo7e > .mIBP0qjqpm1KsHyQnaN8K {\n  float: right;\n}\n\nul._25p7DIV67-QNcCjUH2_dOv > li > p.iq6z0sr0nWwiIWegtZp1O {\n  margin-top: 5px;\n}\n\nul._25p7DIV67-QNcCjUH2_dOv > li > p.iq6z0sr0nWwiIWegtZp1O > span {\n  cursor: help;\n}\n\nul._25p7DIV67-QNcCjUH2_dOv > li > p.iq6z0sr0nWwiIWegtZp1O > ._2V4reHhVaVhGhf-OS8lSe6 {\n  margin-left: 5px;\n}","",{version:3,sources:["webpack://./src/index.css"],names:[],mappings:"AAAA;EACE,iCAAiC;AACnC;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,UAAU;EACV,cAAc;EACd,gBAAgB;EAChB,gBAAgB;AAClB;;AAEA;EACE,qBAAqB;EACrB,UAAU;AACZ;;AAEA;EACE,YAAY;EACZ,yBAAyB;EACzB,kBAAkB;EAClB,YAAY;EACZ,eAAe;AACjB;;AAEA;EACE,SAAS;AACX;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,YAAY;AACd;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,YAAY;AACd;;AAEA;EACE,gBAAgB;AAClB",sourcesContent:["body {\n  font-family: 'Roboto', sans-serif;\n}\n\nh1 {\n  text-align: center;\n}\n\n.container {\n  padding: 0;\n  margin: 0 auto;\n  min-width: 300px;\n  max-width: 600px;\n}\n\nul.stations {\n  list-style-type: none;\n  padding: 0;\n}\n\nul.stations > li {\n  height: 50px;\n  border: 2px solid #d6d2d2;\n  border-radius: 5px;\n  padding: 7px;\n  margin-top: 5px;\n}\n\nul.stations > li > p {\n  margin: 0;\n}\n\nul.stations > li > p.title {\n  font-size: 18px;\n}\n\nul.stations > li > p.title > .distance {\n  float: right;\n}\n\nul.stations > li > p.status {\n  margin-top: 5px;\n}\n\nul.stations > li > p.status > span {\n  cursor: help;\n}\n\nul.stations > li > p.status > .docks {\n  margin-left: 5px;\n}"],sourceRoot:""}]),i.locals={container:"khDjRQ3EZ-hj-Fv_Pijby",stations:"_25p7DIV67-QNcCjUH2_dOv",title:"_1K28VpaI9vpLB0C1hETo7e",distance:"mIBP0qjqpm1KsHyQnaN8K",status:"iq6z0sr0nWwiIWegtZp1O",docks:"_2V4reHhVaVhGhf-OS8lSe6"};const r=i},645:t=>{"use strict";t.exports=function(t){var n=[];return n.toString=function(){return this.map((function(n){var e=t(n);return n[2]?"@media ".concat(n[2]," {").concat(e,"}"):e})).join("")},n.i=function(t,e,s){"string"==typeof t&&(t=[[null,t,""]]);var a={};if(s)for(var o=0;o<this.length;o++){var i=this[o][0];null!=i&&(a[i]=!0)}for(var r=0;r<t.length;r++){var c=[].concat(t[r]);s&&a[c[0]]||(e&&(c[2]?c[2]="".concat(e," and ").concat(c[2]):c[2]=e),n.push(c))}},n}},15:t=>{"use strict";function n(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,s=new Array(n);e<n;e++)s[e]=t[e];return s}t.exports=function(t){var e,s,a=(s=4,function(t){if(Array.isArray(t))return t}(e=t)||function(t,n){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var e=[],s=!0,a=!1,o=void 0;try{for(var i,r=t[Symbol.iterator]();!(s=(i=r.next()).done)&&(e.push(i.value),!n||e.length!==n);s=!0);}catch(t){a=!0,o=t}finally{try{s||null==r.return||r.return()}finally{if(a)throw o}}return e}}(e,s)||function(t,e){if(t){if("string"==typeof t)return n(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);return"Object"===s&&t.constructor&&(s=t.constructor.name),"Map"===s||"Set"===s?Array.from(t):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?n(t,e):void 0}}(e,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=a[1],i=a[3];if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),l="/*# ".concat(c," */"),d=i.sources.map((function(t){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(t," */")}));return[o].concat(d).concat([l]).join("\n")}return[o].join("\n")}},159:t=>{t.exports='"use strict";\n\n// As we don\'t use any framework and need to dynamically update the list, we will store the state in window object.\nwindow.state = {\n  hasBikes: false,\n  hasDocks: false,\n  position: null\n};\n\n// Ref: https://stackoverflow.com/questions/847185/convert-a-unix-timestamp-to-time-in-javascript\nconst formatTime = (timestamp) => {\n  let date = new Date(timestamp * 1000);\n  let hours = date.getHours();\n  let minutes = "0" + date.getMinutes();\n  let seconds = "0" + date.getSeconds();\n  let formattedTime = hours + \':\' + minutes.substr(-2) + \':\' + seconds.substr(-2);\n  return formattedTime;\n};\n\nconst renderItem = (statusItem, stationItem) => {\n  return `<p class="title">${stationItem.name} - max. ${stationItem.capacity} <a href="http://maps.google.com/?q=${stationItem.lat},${stationItem.lon}"><i class="fas fa-map-marker-alt"></i></a> <span class="distance">${statusItem.distance ? statusItem.distance.toFixed(2) + \' km\' : \'\'}</span></p>\n    <p class="status"><span class="bikes" title="Available bikes"><i class="fas fa-bicycle"></i> ${statusItem.num_bikes_available}</span> <span class="docks" title="Available docks"><i class="fas fa-parking"></i> ${statusItem.num_docks_available}</span></p>`\n};\n\nconst renderStations = () => {\n  console.log(\'in renderStations. Current state:\', window.state);\n\n  // Clear list\n  document.getElementById(\'stations\').innerHTML = "";\n\n  // Filter by hasBikes and hasDocks\n  let stationsStatusList = window.state.statusObj.data.stations.filter((s) => !window.state.hasBikes || s.num_bikes_available > 0);\n  stationsStatusList = stationsStatusList.filter((s) => !window.state.hasDocks || s.num_docks_available > 0);\n  // Sort if position is known\n  if (!!window.state.position) {\n    stationsStatusList = stationsStatusList.sort((s1, s2) => { return s1.distance - s2.distance; });\n  }\n\n  document.getElementById(\'totalCount\').textContent = stationsStatusList.length;\n  document.getElementById(\'lastUpdated\').textContent = formatTime(window.state.statusObj.last_updated);\n\n  const stationsList = document.getElementById(\'stations\');\n  stationsStatusList.forEach(stationStatus => {\n    let stationItem = document.createElement(\'li\');\n    const itemHTML = renderItem(stationStatus, window.state.stationsMap[stationStatus.station_id]);\n    stationItem.innerHTML = itemHTML;\n    stationsList.appendChild(stationItem);\n  });\n};\n\n// Called on initial data load\nconst initAndRenderStations = (stationsObj, statusObj) => {\n  console.log(\'stationsObj\', stationsObj, \'statusObj\', statusObj)\n\n  let stationsMap = {};\n  stationsObj.data.stations.forEach(station => {\n    stationsMap[station.station_id] = station;\n  });\n  \n  // Store both objects and map in window state\n  console.log(\'stationsMap\', stationsMap);\n  window.state.statusObj = statusObj;\n  window.state.stationsObj = stationsObj;\n  window.state.stationsMap = stationsMap;\n\n  renderStations();\n};\n\n// Init listeners for checkboxes\nconst hasBikes = document.querySelector("input[name=hasBikes]");\nhasBikes.addEventListener(\'change\', (e) => {\n  window.state.hasBikes = e.target.checked;\n  renderStations();\n});\nconst hasDocks = document.querySelector("input[name=hasDocks]");\nhasDocks.addEventListener(\'change\', (e) => {\n  window.state.hasDocks = e.target.checked;\n  renderStations();\n});\n\n// Functions for calculating distance between coordinates\n// https://stackoverflow.com/questions/18883601/function-to-calculate-distance-between-two-coordinates\nconst deg2rad = (deg) => {\n  return deg * (Math.PI/180)\n};\n\nconst getDistanceFromLatLonInKm = (lat1, lon1, lat2, lon2) => {\n  var R = 6371; // Radius of the earth in km\n  var dLat = deg2rad(lat2-lat1);  // deg2rad below\n  var dLon = deg2rad(lon2-lon1); \n  var a = \n      Math.sin(dLat/2) * Math.sin(dLat/2) +\n      Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) * \n      Math.sin(dLon/2) * Math.sin(dLon/2)\n      ; \n  var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); \n  var d = R * c; // Distance in km\n  return d;\n};\n\n// Request position\nnavigator.geolocation.getCurrentPosition((position) => {\n  window.state.position = position;\n  window.state.statusObj.data.stations.forEach(s => {\n    s.distance = getDistanceFromLatLonInKm(position.coords.latitude, position.coords.longitude, window.state.stationsMap[s.station_id].lat, window.state.stationsMap[s.station_id].lon);\n  });\n  renderStations();\n});\n\n\n// Fetch and render the initial list\nlet fetchStations = fetch(\'https://gbfs.urbansharing.com/oslobysykkel.no/station_information.json\');\nlet fetchStationStatus = fetch(\'https://gbfs.urbansharing.com/oslobysykkel.no/station_status.json\');\nPromise.all([fetchStations, fetchStationStatus])\n  .then(responses => {\n    for (let response of responses) {\n      console.log(`Requesting ${response.url}: ${response.status}`); // shows 200 for every url\n    }\n\n    return responses;\n  })\n  // TODO error handling HTTP OK!\n  .then(responses => Promise.all(responses.map(r => r.json())))\n  .then(jsons => initAndRenderStations(...jsons))\n  .catch(() => alert("Error when fetching stations data."));\n'},685:t=>{t.exports=function(t){function n(t){"undefined"!=typeof console&&(console.error||console.log)("[Script Loader]",t)}try{"undefined"!=typeof execScript&&"undefined"!=typeof attachEvent&&"undefined"==typeof addEventListener?execScript(t):"undefined"!=typeof eval?eval.call(null,t):n("EvalError: No eval function available")}catch(t){n(t)}}},379:(t,n,e)=>{"use strict";var s,a=function(){var t={};return function(n){if(void 0===t[n]){var e=document.querySelector(n);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(t){e=null}t[n]=e}return t[n]}}(),o=[];function i(t){for(var n=-1,e=0;e<o.length;e++)if(o[e].identifier===t){n=e;break}return n}function r(t,n){for(var e={},s=[],a=0;a<t.length;a++){var r=t[a],c=n.base?r[0]+n.base:r[0],l=e[c]||0,d="".concat(c," ").concat(l);e[c]=l+1;var u=i(d),p={css:r[1],media:r[2],sourceMap:r[3]};-1!==u?(o[u].references++,o[u].updater(p)):o.push({identifier:d,updater:m(p,n),references:1}),s.push(d)}return s}function c(t){var n=document.createElement("style"),s=t.attributes||{};if(void 0===s.nonce){var o=e.nc;o&&(s.nonce=o)}if(Object.keys(s).forEach((function(t){n.setAttribute(t,s[t])})),"function"==typeof t.insert)t.insert(n);else{var i=a(t.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}return n}var l,d=(l=[],function(t,n){return l[t]=n,l.filter(Boolean).join("\n")});function u(t,n,e,s){var a=e?"":s.media?"@media ".concat(s.media," {").concat(s.css,"}"):s.css;if(t.styleSheet)t.styleSheet.cssText=d(n,a);else{var o=document.createTextNode(a),i=t.childNodes;i[n]&&t.removeChild(i[n]),i.length?t.insertBefore(o,i[n]):t.appendChild(o)}}function p(t,n,e){var s=e.css,a=e.media,o=e.sourceMap;if(a?t.setAttribute("media",a):t.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleSheet)t.styleSheet.cssText=s;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(s))}}var f=null,h=0;function m(t,n){var e,s,a;if(n.singleton){var o=h++;e=f||(f=c(n)),s=u.bind(null,e,o,!1),a=u.bind(null,e,o,!0)}else e=c(n),s=p.bind(null,e,n),a=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)};return s(t),function(n){if(n){if(n.css===t.css&&n.media===t.media&&n.sourceMap===t.sourceMap)return;s(t=n)}else a()}}t.exports=function(t,n){(n=n||{}).singleton||"boolean"==typeof n.singleton||(n.singleton=(void 0===s&&(s=Boolean(window&&document&&document.all&&!window.atob)),s));var e=r(t=t||[],n);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var s=0;s<e.length;s++){var a=i(e[s]);o[a].references--}for(var c=r(t,n),l=0;l<e.length;l++){var d=i(e[l]);0===o[d].references&&(o[d].updater(),o.splice(d,1))}e=c}}}}},n={};function e(s){if(n[s])return n[s].exports;var a=n[s]={id:s,exports:{}};return t[s](a,a.exports,e),a.exports}e.n=t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},e.d=(t,n)=>{for(var s in n)e.o(n,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:n[s]})},e.o=(t,n)=>Object.prototype.hasOwnProperty.call(t,n),e(685)(e(159)),(()=>{"use strict";var t=e(379),n=e.n(t),s=e(788);n()(s.Z,{insert:"head",singleton:!1}),s.Z.locals})()})();